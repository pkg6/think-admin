
<link href="//cdn.staticfile.org/layui/2.9.7/css/layui.css" rel="stylesheet">

<div class="admin-body animated fadeIn">
    <!--表格呈现-->
    <table class="layui-hide" id="elem-import-table" lay-url="{$routes.files}"></table>
    <!--批量操作-->
    <script type="text/html" id="table-opt">
        <div class="layui-btn-container">
            <button class="layui-btn layui-btn-sm" lay-event="backup" lay-url="{$routes.view_backup}">备份</button>

        </div>
    </script>
    <!--单行操作-->
    <script type="text/html" id="table-row-opt">
        <div class="layui-btn-container">
            <button class="layui-btn layui-btn-sm" lay-event="download" lay-url="{$routes.download}">下载</button>
            <button class="layui-btn layui-btn-sm" lay-event="import" lay-url="{$routes.import}">导入</button>
            <button class="layui-btn layui-btn-sm" lay-event="delete" lay-url="{$routes.delete}">删除</button>
        </div>
    </script>
</div>

<script src="//unpkg.com/layui@2.9.8/dist/layui.js"></script>
<!--https://github.com/pkg6/think-backup/blob/main/src/tp5er.js-->
<script src="https://cdn.jsdelivr.net/gh/pkg6/think-backup@2.2.4/src/tp5er.js"></script>
<script>
    layui.define(['tp5er'], function (exports) {
        var tp5er = layui.tp5er
        tp5er.imports.bind('elem-import-table')
            .render({
                cols: [[
                    {field: 'name', title: '文件名', width: 120},
                    {field: 'database', title: '数据库', width: 120},
                    {field: 'connection', title: '数据库链接', width: 120},
                    {field: 'size', title: '大小', width: 120},
                    {fixed: 'right', title: '操作', width: 200, toolbar: '#table-row-opt'}
                ]],
                toolbar: '#table-opt',
            })
            .on()
    });
</script>
